<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DL.AUTO - Fiche v√©hicule</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'argent': '#C0C0C0',    
            'jaune': '#FFD700',    
            'noir': '#000000'       
          }
        }
      }
    }
  </script>
  <style>
    /* –õ–∞–π—Ç–±–æ–∫—Å –¥–ª—è –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ */
    .lightbox {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.95);
    }
    .lightbox-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 90%;
      max-height: 90%;
      border: 3px solid #FFD700;
      border-radius: 8px;
    }
    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 40px;
      font-size: 40px;
      color: #FFD700;
      cursor: pointer;
      font-weight: bold;
    }
    .lightbox-prev, .lightbox-next {
      position: absolute;
      top: 50%;
      font-size: 40px;
      color: #FFD700;
      cursor: pointer;
      padding: 20px;
      user-select: none;
      background: rgba(0,0,0,0.5);
      border-radius: 50%;
      transform: translateY(-50%);
    }
    .lightbox-prev { left: 20px; }
    .lightbox-next { right: 20px; }
  </style>
</head>
<body class="bg-gray-900 text-white">
  <!-- Header -->
  <header class="bg-black shadow-lg sticky top-0 z-50 border-b-2 border-jaune">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html" class="flex items-center hover:opacity-80 transition">
        <div class="text-2xl font-black text-white mr-2">‚óÜ</div>
        <h1 class="text-3xl font-black text-argent">DL.<span class="text-jaune">AUTO</span></h1>
      </a>
      <a href="tel:+33612345678" class="bg-jaune text-black px-6 py-2 rounded-lg font-bold hover:bg-yellow-500 transition">üìû Appeler</a>
    </div>
  </header>

  <div class="container mx-auto px-4 py-8" id="carDetail">
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
  </div>

  <!-- –õ–∞–π—Ç–±–æ–∫—Å -->
  <div id="lightbox" class="lightbox" onclick="closeGallery()">
    <span class="lightbox-close" onclick="closeGallery()">&times;</span>
    <span class="lightbox-prev" onclick="changePhoto(-1)">&#10094;</span>
    <span class="lightbox-next" onclick="changePhoto(1)">&#10095;</span>
    <img id="lightbox-img" class="lightbox-content">
  </div>

  <script>
    const cars = [
      {
        id: "001",
        make: "Hyundai",
        model: "Getz",
        year: 2006,
        price: 3990,
        mileage: 218000,
        city: "Paris",
        engine: "1.5 diesel",
        transmission: "m√©canique",
        body: "citadine",
        color: "noir",
        description: "Excellent √©tat, bien entretenu, carnet d'entretien complet.",
        photos: [
          "images/Hyundai-Getz-2006/1.jpg",
          "images/Hyundai-Getz-2006/2.jpg",
          "images/Hyundai-Getz-2006/3.jpg",
          "images/Hyundai-Getz-2006/4.jpg",
          "images/Hyundai-Getz-2006/5.jpg"
        ],
        contactPhone: "+33 6 12 34 56 78",
        contactWhatsApp: "33612345678"
      },
      {
        id: "002",
        make: "BMW",
        model: "X5",
        year: 2020,
        price: 45000,
        mileage: 45000,
        city: "Paris",
        engine: "3.0 essence",
        transmission: "automatique",
        body: "SUV",
        color: "noir",
        description: "Excellent √©tat, 4x4 d'origine, entretien concessionnaire.",
        photos: [
          "images/BMW-X5-2020/1.jpg",
          "images/BMW-X5-2020/2.jpg",
          "images/BMW-X5-2020/3.jpg"
        ],
        contactPhone: "+33 6 12 34 56 78",
        contactWhatsApp: "33612345678"
      },
      {
        id: "003",
        make: "Mercedes-Benz",
        model: "Classe E",
        year: 2019,
        price: 38000,
        mileage: 67000,
        city: "Lyon",
        engine: "2.0 diesel",
        transmission: "automatique",
        body: "berline",
        color: "blanc",
        description: "Magnifique berline business. Diesel √©conomique.",
        photos: [
          "images/Mercedes-E-2019/1.jpg",
          "images/Mercedes-E-2019/2.jpg",
          "images/Mercedes-E-2019/3.jpg"
        ],
        contactPhone: "+33 6 98 76 54 32",
        contactWhatsApp: "33698765432"
      }
    ];

    let filteredCars = [...cars];

    window.onload = function() {
      renderFilters();
      checkURLParams();
      renderCars();
    };

    function renderFilters() {
      const makes = [...new Set(cars.map(car => car.make))].sort();
      const select = document.getElementById('filterMake');
      makes.forEach(make => {
        select.innerHTML += `<option value="${make}">${make}</option>`;
      });
    }

    function checkURLParams() {
      const params = new URLSearchParams(window.location.search);
      const search = params.get('search');
      const make = params.get('make');
      
      if (search) {
        filteredCars = cars.filter(car => 
          car.make.toLowerCase().includes(search.toLowerCase()) ||
          car.model.toLowerCase().includes(search.toLowerCase())
        );
        document.getElementById('mainSearch')?.setAttribute('value', search);
      } else if (make) {
        filteredCars = cars.filter(car => car.make === make);
        document.getElementById('filterMake').value = make;
      }
    }

    function renderCars(carsToShow = filteredCars) {
      const grid = document.getElementById('carsGrid');
      const count = document.getElementById('resultsCount');
      const noResults = document.getElementById('noResults');
      
      if (filteredCars.length === 0) {
        grid.style.display = 'none';
        noResults.classList.remove('hidden');
      } else {
        grid.style.display = 'grid';
        noResults.classList.add('hidden');
        grid.innerHTML = carsToShow.map(car => `
          <div class="bg-black rounded-lg shadow-lg hover:shadow-yellow-500/25 transition border border-jaune">
            <img src="${car.photos[0]}" class="w-full h-48 object-cover rounded-t-lg border-b border-jaune">
            <div class="p-4">
              <h3 class="font-bold text-xl text-argent mb-2">${car.make} ${car.model}</h3>
              <p class="text-gray-400">${car.year} ‚Ä¢ ${car.mileage.toLocaleString()} km</p>
              <p class="text-2xl font-bold text-jaune mt-2">${car.price.toLocaleString()} ‚Ç¨</p>
              <p class="text-sm text-gray-500">üìç ${car.city}</p>
              <a href="car.html?id=${car.id}" class="block mt-4 bg-jaune text-black text-center py-2 rounded-lg font-bold hover:bg-yellow-500 transition">
                D√©tails ‚Üí
              </a>
            </div>
          </div>
        `).join('');
      }
      
      count.textContent = `Trouv√©: ${filteredCars.length} v√©hicule(s)`;
    }

    function applyFilters() {
      const make = document.getElementById('filterMake').value;
      const priceFrom = document.getElementById('priceFrom').value;
      const priceTo = document.getElementById('priceTo').value;
      const yearFrom = document.getElementById('yearFrom').value;
      const yearTo = document.getElementById('yearTo').value;
      
      filteredCars = cars.filter(car => {
        if (make && car.make !== make) return false;
        if (priceFrom && car.price < +priceFrom) return false;
        if (priceTo && car.price > +priceTo) return false;
        if (yearFrom && car.year < +yearFrom) return false;
        if (yearTo && car.year > +yearTo) return false;
        return true;
      });
      
      renderCars();
    }

    function resetFilters() {
      document.getElementById('filterMake').value = '';
      document.getElementById('priceFrom').value = '';
      document.getElementById('priceTo').value = '';
      document.getElementById('yearFrom').value = '';
      document.getElementById('yearTo').value = '';
      filteredCars = [...cars];
      renderCars();
    }

    function renderLastCars() {
      const container = document.getElementById('lastCars');
      if (!container) return;
      const lastCars = cars.slice(-3);
      container.innerHTML = lastCars.map(car => `
        <div class="bg-black rounded-lg shadow-lg hover:shadow-yellow-500/25 transition border border-jaune">
          <img src="${car.photos[0]}" class="w-full h-48 object-cover rounded-t-lg border-b border-jaune">
          <div class="p-4">
            <h3 class="font-bold text-xl text-argent mb-2">${car.make} ${car.model}</h3>
            <p class="text-gray-400">${car.year} ‚Ä¢ ${car.mileage.toLocaleString()} km</p>
            <p class="text-2xl font-bold text-jaune mt-2">${car.price.toLocaleString()} ‚Ç¨</p>
            <a href="car.html?id=${car.id}" class="block mt-4 bg-jaune text-black text-center py-2 rounded-lg font-bold hover:bg-yellow-500 transition">
              D√©tails ‚Üí
            </a>
          </div>
        </div>
      `).join('');
    }

    function quickSearch() {
      const query = document.getElementById('mainSearch').value;
      if (query.trim()) {
        window.location.href = `catalog.html?search=${encodeURIComponent(query)}`;
      } else {
        window.location.href = 'catalog.html';
      }
    }

    function filterByBrand(brand) {
      window.location.href = `catalog.html?make=${encodeURIComponent(brand)}`;
    }

    window.onload = function() {
      renderLastCars();
      if (document.getElementById('mainSearch')) {
        // –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      }
    };

    // –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    let currentPhotoIndex = 0;
    let currentPhotos = [];

    function openGallery(index) {
      currentPhotoIndex = index;
      const params = new URLSearchParams(window.location.search);
      const carId = params.get('id');
      const car = cars.find(c => c.id === carId);
      if (car) {
        currentPhotos = car.photos;
        document.getElementById('lightbox').style.display = 'block';
        document.getElementById('lightbox-img').src = currentPhotos[currentPhotoIndex];
      }
      event.stopPropagation();
    }

    function closeGallery() {
      document.getElementById('lightbox').style.display = 'none';
    }

    function changePhoto(direction) {
      currentPhotoIndex += direction;
      if (currentPhotoIndex < 0) currentPhotoIndex = currentPhotos.length - 1;
      if (currentPhotoIndex >= currentPhotos.length) currentPhotoIndex = 0;
      document.getElementById('lightbox-img').src = currentPhotos[currentPhotoIndex];
      event.stopPropagation();
    }
  </script>
</body>
</html>